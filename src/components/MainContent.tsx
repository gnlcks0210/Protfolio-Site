'use client';

import { useState } from 'react';
import { ProjectCard } from './ProjectCard';
import { ProjectDetail } from './ProjectDetail';
import { Printer } from 'lucide-react';

const projects = [
  {
    id: 1,
    title: '커플 앱',
    description: '커플 간의 소통과 추억 관리를 돕기 위해, 감정일기, 일정공유 등의 기능을 갖춘 모바일 앱을 개발',
    period: '2025. 5. 28. - 2025. 6. 19',
    tech: ['Java', 'Firebase'],
    githubUrl: 'https://github.com/gnlcks0210/couple_app',
    details: `✅ 프로젝트 개요

TWOgether는 커플 간의 소통을 돕고, 일정・기념일・감정 기록 등을 함께 관리할 수 있도록 개발된 모바일 애플리케이션입니다.
Firebase 기반의 실시간 데이터 연동을 활용하여 두 사용자 간의 질문/답변, 일정, 기념일 정보를 즉시 공유할 수 있으며, 커플 관계 유지에 도움을 줄 수 있는 직관적인 UX/UI를 제공하는 것을 목표로 하였습니다.

✅ 개발 목적

• 커플 간에 지속적인 대화를 이어갈 수 있도록 "오늘의 질문", "감정일지" 기능 제공
• 날짜 기반의 기념일 카운트(D-Day) 및 일정 관리 기능으로 관계 유지 지원
• 두 사람의 데이터를 실시간으로 동기화하여 경험의 일치성 강화
• 간단한 계정 생성 및 코드 기반 연결 기능으로 사용자 진입 장벽 최소화

✅ 주요 기능 상세

1. 계정 생성 및 커플 연동
• Firebase Authentication을 기반으로 사용자 계정 생성
• 앱 내에서 연결 코드를 발급 → 상대방이 입력하면 즉시 커플 매칭
• 연동 해제 기능 제공(계정 삭제 및 초기화)

2. 홈 화면 기능
• 커플이 된 날짜 기준 DAY 표시
• Firebase에 저장된 '오늘의 질문' 불러오기
• 두 사람이 각각 작성한 답변을 실시간으로 동기화
• 기념일(D-Day) 표시 및 관계 설정 반영
• 질문 회차 자동 계산

3. 질문/답변 실시간 공유
• 한 사용자가 답변 작성하면 상대방 화면에도 동일하게 반영
• 답변 확인 화면 제공
• 로딩 화면을 통해 사용자 경험 강화

4. 커플 캘린더
• 날짜 선택 시 해당 날짜의 질문/답변 기록 확인 가능
• 두 사람이 함께 작성한 기록 기반으로 달력 UI 표시
• 날짜별 상세 내역 모달창 제공

5. 관계 설정
• "처음 만난 날" 설정 시 홈 화면 D-Day 및 UI 자동 변경
• D-Day 활성화/비활성화 옵션 제공
• 관계 정보 업데이트 시 전 화면 동기화

6. 계정 정보 관리
• 이름 변경, 연결 상태 확인 가능
• 파트너 연결 해제 시 경고 팝업 및 계정 초기화 수행

7. UI/UX 디자인
• 전체적으로 따뜻한 커플 감성 테마 적용
• 홈/캘린더/설정 탭으로 구성된 직관적인 하단 내비게이션
• Figma 기반 프로토타입 설계 후 Android Studio로 구현

✅ 기술적 특징

• Firebase Authentication: 안전한 로그인/회원가입 처리
• Firebase Realtime Database:
  - 질문/답변 실시간 공유 기능
  - 커플 캘린더 데이터 동기화
  - 기념일 정보/관계 설정 정보 연동
• Android Studio, Kotlin 기반 구현
• GitHub 협업 및 버전 관리
• Figma를 활용한 UI/UX 설계

✅ 개발하면서 맡은 역할 (엄휘찬 기여 부분 요약)

• 전체 데이터베이스 구조 설계
• Firebase Realtime Database 연동 구현
• 질문/답변 저장 구조 설계 및 동기화 처리
• 캘린더 기능 데이터 처리
• 관계 설정 및 날짜 연산 로직 구현 참여
• 앱 전체 안정성·데이터 흐름 점검 및 수정

✅ 프로젝트 결과 및 기대효과

• 두 사용자의 감정·일정·기념일 데이터를 실시간으로 공유함으로써 관계 형성을 돕는 애플리케이션 구현
• 사용자 친화적 UI를 통해 누구나 쉽게 사용할 수 있도록 설계
• 관계 유지에 도움이 되는 질문・기념일・캘린더 기능을 하나의 앱 안에서 통합
• Firebase 기반 설계로 확장성 및 유지보수 용이`
  },
  {
    id: 2,
    title: '학생 인원관리',
    description: '학생 정보를 효율적으로 관리하기 위해 개발된 인원관리 시스템입니다.',
    period: '2024.08.27 ~ 2024.12.06',
    tech: ['React', 'Node.js', 'MySQL'],
    githubUrl: 'https://github.com/gnlcks0210/Student_Attendance_Management',
    details: `📌 1. 프로젝트 개요

시분설 학생 출석 관리 시스템은 학생, 교수, 학부모, 관리자 등 다양한 사용자의 필요를 충족시키는 통합 학사 출석 관리 웹 시스템으로 개발되었다.
수업별 출석 기록 관리, 출석 코드 기반 자동 출석, 교수·학부모의 모니터링 기능, 학생의 정보 관리 및 이의 신청 기능 등 학교 운영에 필요한 핵심 기능들을 웹 기반으로 구현하였다.

이 프로젝트는 다중 사용자 역할(Role)을 기반으로 페이지 접근 권한이 달라지는 구조로 설계되었으며, 모든 출석·공지·알림 정보는 관리자가 기록을 확인하고, 학생·교수·학부모가 실시간으로 조회할 수 있도록 구성하였다.

📌 2. 개발 목적

• 출석 관리 효율화 및 오류 최소화
• 학생·교수 간 출석 정보를 실시간으로 공유
• 학부모 참여를 통한 학사 소통 강화
• 출석 통계 자동화 및 보고서 생성
• 학사 행정을 위한 관리자 전용 기능 제공

📌 3. 주요 기능 요약 (역할 기반)

✔ 관리자(Admin)
• 관리자 로그인 및 계정 관리
• 학생 기본 정보 등록(수동 등록 + 엑셀 업로드)
• 사용자 정보 수정
• 공지사항 작성/수정/삭제
• 시스템 알림 관리(출석 경고, 시스템 공지 등)
• 로그 관리(로그인 로그, 출석 수정 로그 등)
• 사용자 권한 및 계정 정보 관리

✔ 교수(Professor)
• 교수 로그인
• 담당 강의 목록 및 시간표 조회
• 수업별 출석 코드 생성(자동 출석 기능)
• 학생 출석 상태 실시간 확인
• 출석 기록 수정 기능 (지각→출석, 결석→병결 등)
• 출석 기준 설정(지각 3회 → 결석 1회 / 결석 3회 → F 학점)
• 출석 통계 조회
• 공지사항 작성 및 수정
• 학생 알림 발송(출석 경고 등)

✔ 학생(Student)
• 학번 + PW 로그인
• 개인정보 수정(이메일, 전화번호, 비밀번호 변경)
• 자신이 수강 중인 시간표 불러오기
• 출석 코드 입력을 통한 자동 출석
• 출석 보고서 조회(전체/과목별/상세 기록)
• 출석 통계(출석률, 지각·결석 횟수 등)
• 알림 수신 및 확인
• 공지사항 열람
• 출석 이의 신청 기능(사유서 등록)

✔ 학부모(Parent)
• 자녀 학생 계정 기반으로 학부모 계정 생성
• 학부모 로그인
• 자녀의 출석 시간표·출석 현황 확인
• 공지사항 열람
• 알림 확인
• 개인정보 관리

📌 4. 시스템 핵심 기능 상세 분석

🔹 1) 자동 출석 기능 (출석 코드 기반)
• 교수가 수업 시작 시 출석 코드 생성
• 생성된 코드는 일정 시간 동안 유효(is_active, expired_at)
• 학생은 코드를 입력하면 Attendance 테이블에 즉시 기록
• 출석 처리 로직
  - 입력한 코드 → 해당 수업 코드와 비교
  - 시간 기준 자동 지각 처리 가능
  - 잘못된 코드 입력 시 오류 메시지

🔹 2) 수동 출석 기능
• 교수 화면에서 학생 리스트 표시
• 클릭 횟수로 출석 상태 변경
  - 1회: 출석
  - 2회: 지각
  - 3회: 결석
  - 4회: 초기화

🔹 3) 출석 통계 자동화
• 학생·교수·학부모·관리자 모두 통계 조회 가능
• 기간별/과목별/누적 통계
• 출석률, 출석·지각·결석 횟수
• F 학점 위험 알림 자동 발송

🔹 4) 공지사항·알림 관리
• 교수·관리자가 공지사항 작성
• 수강생 및 학부모에게 자동 배포
• 알림(Notifications table)로 개인 메시지 전송 가능

🔹 5) 개인정보 및 계정 관리
• 비밀번호 재설정 기능
• 연락처·이메일 변경
• 학생은 학부모 계정 연결 가능

📌 5. 데이터베이스 구조 분석

🔹 1) Users 테이블 (핵심 사용자 정보 테이블)
• 모든 사용자(학생, 교수, 학부모, 관리자)를 역할별로 저장
• role ENUM으로 권한 구분
• 로그인과 접근 권한 제어의 기준이 되는 핵심 테이블

🔹 2) Classes & Class_Students (N:M 관계)
• 한 과목에 여러 학생 수강
• 한 학생이 여러 과목 수강
  → 중간 테이블 Class_Students로 관계 구성

🔹 3) Attendance 테이블 (출석 기록 핵심)
• 날자별 출결 저장
• 출석 코드(code_id) 사용
• present/late/absent/early_leave 관리

🔹 4) Class_Codes (자동 출석 코드 관리)
• 코드 생성 시간, 만료 시간
• 수업 시작 시간과 연동

🔹 5) Notifications & Announcements
• 모든 알림은 개별 사용자 기반
• 공지사항은 전체 대상 기반

📌 6. 시스템 흐름 요약 (시나리오 기반)

✔ 학생 출석 프로세스
• 학생이 로그인
• 현재 수업 자동 조회
• 교수 출석 코드 생성
• 학생이 코드 입력
• Attendance 테이블에 자동 기록
• 교수 화면에서 실시간 확인

✔ 교수 출석 기록 수정
• 학생이 사유서 제출
• 교수 화면에서 출결 수정 요청 확인
• 출석 기록 수정
• 수정 로그 기록(로그 테이블 예정)

✔ 학부모 출석 조회
• 학부모 계정 로그인
• 자녀의 학번 기반으로 데이터 연결
• 출석 통계 확인

📌 7. 메뉴 구조 정리(역할별)

각 역할별로 메뉴가 다르게 표현되며, 사이드바 카테고리는
Attendance / Management / Administration
세 그룹으로 일관성 있게 구성.

📌 8. 프로젝트 기술적 강점

• 다중 사용자 역할 시스템(Role-Based Access Control) 구현
• 출석 코드 기반 자동 출석 처리
• N:M 관계의 DB 구조 설계(Class_Students)
• 출석 통계 자동화 및 시각화 (Recharts 등)
• 공지사항/알림을 통한 학사 커뮤니케이션 강화
• 비밀번호 재설정 및 계정 관리 UI 적용
• 전체 시스템 요구사항 기반 CRUD 완전 구현 가능 구조`
  },
  {
    id: 3,
    title: '독서 게시판',
    description: '독서를 즐기는 사용자들이 책에 대한 감상과 요약을 공유하고, 자유롭게 소통할 수 있는 웹 기반 독서 커뮤니티 플랫폼이다.',
    period: '2025.09 ~ 2025.10',
    tech: ['React', 'Node.js', 'MySQL'],
    githubUrl: 'https://github.com/gnlcks0210/DDOKDOK',
    details: `**똑독(Ddokdok)**은 독서를 즐기는 사용자들이 책에 대한 감상과 요약을 공유하고, 자유롭게 소통할 수 있는 웹 기반 독서 커뮤니티 플랫폼이다. 단순한 기록을 넘어, 별점 기반의 리뷰 시스템과 자유 주제의 북클럽 게시판을 통합하여 독서 경험을 공유하고 확장하는 것을 목표로 한다. 사용자 친화적인 UI/UX를 제공하며, 소셜 로그인(카카오) 및 마이페이지 통계 기능을 통해 사용자 편의성을 강화하였다.

📌 2. 개발 목적
독서 기록의 체계화: 읽은 책의 내용 요약, 감상평, 별점을 기록하여 개인의 독서 이력을 관리.

독서 커뮤니티 활성화: '북클럽' 기능을 통해 책 추천, 토론 등 독서와 관련된 자유로운 소통 공간 제공.

사용자 경험 강화: 직관적인 디자인과 카카오 로그인 등 간편한 접근성을 통해 지속적인 서비스 이용 유도.

데이터 시각화: 마이페이지에서 자신의 활동(작성 글, 댓글, 좋아요)을 수치로 확인하여 성취감 부여.

📌 3. 주요 기능 요약 (사용자 역할 기반)
✔ 일반 사용자 (Member)
계정 관리:

이메일/비밀번호 기반의 일반 회원가입 및 로그인.

카카오 API를 연동한 소셜 로그인 지원.

프로필 정보(닉네임, 비밀번호, 프로필 사진) 수정.

북클럽 (커뮤니티):

자유로운 주제의 게시글 작성, 수정, 삭제.

다른 사용자의 게시글 조회 및 댓글 작성.

공감하는 게시글에 '좋아요' 표시.

요약 & 별점 (리뷰):

책 제목, 저자, 장르 정보를 포함한 독서 리뷰 작성.

1~5점 척도의 별점 평가 기능.

타인의 리뷰 열람 및 댓글 소통.

마이페이지:

자신의 활동 내역(작성한 글 수, 작성한 댓글 수, 받은 좋아요 수) 통계 확인.

자신이 작성한 게시글 및 댓글 리스트 모아보기.

📌 4. 시스템 핵심 기능 상세 분석
🔹 1) 이원화된 게시판 시스템
북클럽 게시판: 소통 중심의 자유 게시판 성격. 제목과 본문 위주의 텍스트 데이터 처리가 핵심.

요약 게시판: 정보 중심의 리뷰 게시판 성격. 책 제목, 저자, 별점(Rating) 등 구조화된 추가 메타데이터를 함께 저장하고 출력함.

분석: 하나의 Post 테이블을 공유하되 rating이나 category 컬럼을 통해 구분하거나, 별도의 로직으로 UI를 분리하여 렌더링하는 구조로 파악됨.

🔹 2) 상호작용 기능 (댓글 및 좋아요)
댓글(Comment): 게시글(Post)과 1:N 관계로 연결되며, 작성 시간 순으로 정렬되어 소통의 흐름을 보여줌.

좋아요(Likes): 게시글과 사용자의 N:M 관계를 해소하는 매핑 테이블을 통해 구현.

중복 방지 로직: 한 사용자가 한 게시글에 대해 중복으로 좋아요를 누를 수 없도록 DB 차원(Unique Key) 또는 애플리케이션 로직에서 제어.

🔹 3) 마이페이지 통계 대시보드
사용자의 활동성을 한눈에 볼 수 있는 대시보드 UI 제공.

데이터 집계: COUNT 쿼리를 활용하여 '작성한 글', '작성한 댓글', '받은 좋아요'를 실시간으로 산출하여 표시.

🔹 4) 소셜 로그인 (OAuth)
카카오 로그인 API를 활용하여 복잡한 가입 절차 없이 서비스 이용 가능.

기존 회원 테이블과 연동하여, 이메일을 식별자로 사용하거나 별도의 소셜 ID 컬럼을 통해 회원 정보를 관리.

📌 5. 데이터베이스 구조 분석 (ERD 기반)
🔹 1) 회원 (Member) 테이블
서비스의 주체인 사용자 정보를 저장.

주요 컬럼: member_id(PK), email(UK), password, nickname, profile_image

특징: 카카오 로그인 사용자를 고려하여 비밀번호 필드의 제약조건(Nullable 등)이나 별도 관리 로직이 필요할 수 있음.

🔹 2) 게시글 (Post) 테이블
북클럽 글과 독서 요약 글을 통합 관리(또는 구분 관리).

주요 컬럼: post_id(PK), member_id(FK), title, content, rating(별점), created_at

특징: rating 컬럼이 존재하여 별점 데이터를 저장. 북클럽 글의 경우 이 값이 NULL이거나 0일 수 있음.

🔹 3) 댓글 (Comment) 테이블
게시글에 대한 하위 피드백 저장.

주요 컬럼: comment_id(PK), post_id(FK), member_id(FK), content

관계: 회원 및 게시글과 각각 관계를 맺으며, ON DELETE CASCADE 설정을 통해 원본 글이나 회원이 삭제되면 함께 정리됨.

🔹 4) 좋아요 (Likes) 테이블
사용자의 선호도 표현 저장.

주요 컬럼: like_id(PK), post_id(FK), member_id(FK)

제약사항: (post_id, member_id) 조합에 유니크 제약 조건을 걸어 중복 좋아요를 방지하는 구조.

📌 6. 시스템 흐름 요약 (User Flow)
✔ 리뷰 작성 프로세스
사용자 로그인 (일반/카카오)

메인 페이지 또는 헤더의 '글쓰기' 버튼 클릭

'요약 작성하기' 폼 진입

책 제목, 저자, 장르 입력 및 별점 선택

감상평 작성 후 '등록' 클릭

DB Post 테이블에 데이터 저장 (rating 포함)

메인 페이지 '최신 요약' 섹션에 카드 형태로 렌더링

✔ 북클럽 소통 프로세스
메인 페이지 '인기 북클럽' 섹션 확인

관심 있는 게시글 클릭하여 상세 페이지 진입

내용 확인 후 하단 댓글 입력창에 의견 작성

'등록' 클릭 시 Comment 테이블에 저장되고 화면에 즉시 반영

공감 시 '좋아요' 아이콘 클릭 -> 숫자가 증가하며 Likes 테이블에 기록

📌 7. 메뉴 구조 정리
메인 페이지 (Home):

헤더: 검색창, 마이페이지/로그아웃 버튼

인기 북클럽 프리뷰 (더보기 버튼)

최신 요약 프리뷰 (더보기 버튼)

회원 관리:

로그인 페이지 (이메일 로그인 / 카카오 로그인 / 회원가입 링크)

회원가입 페이지 (이메일, 닉네임, 비밀번호 입력)

게시판 (Board):

북클럽 게시판 (리스트 / 상세 / 글쓰기)

요약 게시판 (카드형 리스트 / 상세 / 글쓰기-별점 포함)

마이 페이지 (My Page):

프로필 카드 (닉네임, 활동 통계)

내 활동 탭 (작성한 글 / 작성한 댓글 / 좋아요한 글 리스트)

📌 8. 프로젝트 기술적 강점 (기대 효과)
Node.js & React 기반의 SPA 구현: 부드러운 페이지 전환과 빠른 반응 속도 제공.

효율적인 DB 설계: 정규화된 테이블 설계를 통해 데이터 무결성 확보 및 유지보수 용이성 증대.

소셜 기능 통합: 카카오 로그인 및 좋아요/댓글 기능을 통해 사용자 간의 인터랙션 극대화.

확장 가능성: 향후 도서 API 연동(책 정보 자동 불러오기)이나 독서 캘린더 기능 등으로 확장하기 용이한 구조.`
  }
];

export function MainContent() {
  const [selectedProject, setSelectedProject] = useState<typeof projects[0] | null>(null);

  const handlePrint = () => {
    window.print();
  };

  return (
    <div className="flex-1 bg-white p-8 lg:p-12">
      {/* Print Button */}
      <div className="flex justify-end mb-6">
        <button
          onClick={handlePrint}
          className="flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors print:hidden"
        >
          <Printer size={20} />
          인쇄
        </button>
      </div>

      {/* Introduction */}
      <section className="mb-12">
        <h2 className="mb-6 pb-2 border-b-2 border-gray-300">자기소개</h2>
        <div className="space-y-4 text-gray-700">
          <p>
            저는 새로운 기술과 지식을 빠르게 습득하고, 이를 실제 문제 해결에 적용하는 데에 큰 흥미를 가지고 있습니다.
            복잡한 상황에서도 논리적으로 구조를 파악하며 끝까지 해결책을 찾아가는 끈기를 갖추고 있습니다.
            프로젝트를 진행하면서 꼼꼼한 분석과 체계적인 접근을 통해 안정적인 결과물을 만드는 것을 중요하게 생각합니다.
            또한 지속적인 학습과 자기 발전을 통해 더 효율적인 방법을 탐구하고 성장을 멈추지 않으려 노력합니다.
            책임감 있는 태도와 꾸준함을 바탕으로 맡은 역할을 성실하게 수행하는 사람입니다.
          </p>
        </div>
      </section>

      {/* Education */}
      <section className="mb-12">
        <h2 className="mb-6 pb-2 border-b-2 border-gray-300">학력사항</h2>
        <div className="space-y-4 text-gray-700">
          <div>
            <p>2021 인천 부평공업고등학교 자동화 기계과 졸업</p>
          </div>
          <div>
            <p>2021~2022 인천 부평 공업고등학교 메카트로닉스 기능반</p>
          </div>
          <div>
            <p>2025 인하공업 전문대학 컴퓨터 정보과 재학중</p>
          </div>
        </div>
      </section>

      {/* Awards */}
      <section className="mb-12">
        <h2 className="mb-6 pb-2 border-b-2 border-gray-300">수상내역</h2>
        <div className="space-y-4 text-gray-700">
          <div>
            <p>2019 메카트로닉스 지방경기대회</p>
            <p className="text-sm text-gray-500 ml-4">- 은메달</p>
          </div>
          <div>
            <p>2025 제13회 전국대학교 스마트로봇 경진대회</p>
            <p className="text-sm text-gray-500 ml-4">- 장려상</p>
          </div>
        </div>
      </section>

      {/* Projects */}
      <section className="mb-12">
        <h2 className="mb-6 pb-2 border-b-2 border-gray-300">프로젝트</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {projects.map((project) => (
            <ProjectCard
              key={project.id}
              title={project.title}
              description={project.description}
              onClick={() => setSelectedProject(project)}
            />
          ))}
        </div>
      </section>

      {selectedProject && (
        <ProjectDetail 
          project={selectedProject} 
          onClose={() => setSelectedProject(null)} 
        />
      )}
    </div>
  );
}
